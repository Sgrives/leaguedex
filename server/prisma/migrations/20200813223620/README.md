# Migration `20200813223620`

This migration has been generated by Donny Roufs at 8/14/2020, 12:36:20 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Matchup" DROP CONSTRAINT "Matchup_summoner_id_fkey"

ALTER TABLE "public"."Token" DROP CONSTRAINT "Token_userId_fkey"

ALTER TABLE "public"."Matchup" DROP COLUMN "summoner_id",
ADD COLUMN "user_id" integer  NOT NULL ;

ALTER TABLE "public"."Token" DROP COLUMN "userId",
DROP COLUMN "user_id",
ADD COLUMN "user_id" integer  NOT NULL ;

ALTER TABLE "public"."Matchup" ADD FOREIGN KEY ("user_id")REFERENCES "public"."User"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."Token" ADD FOREIGN KEY ("user_id")REFERENCES "public"."User"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200813222738..20200813223620
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -16,36 +16,36 @@
   username    String    @unique
   password    String
   summoner    Summoner?
   permissions Int       @default(1)
+  Matchups    Matchup[]
   createdAt   DateTime  @default(now())
   updatedAt   DateTime  @updatedAt
   Token       Token[]
 }
 model Summoner {
-  id        Int       @id @default(autoincrement())
+  id        Int      @id @default(autoincrement())
   accountId String
   name      String
   level     Int
-  Matchups  Matchup[]
-  user      User      @relation(fields: [user_id], references: [id])
   user_id   Int
-  region    String    @default("euw")
-  createdAt DateTime  @default(now())
-  updatedAt DateTime  @updatedAt
+  region    String   @default("euw")
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+  user      User     @relation(fields: [user_id], references: [id])
 }
 model Matchup {
-  id           Int       @id @default(autoincrement())
+  id           Int      @id @default(autoincrement())
   champion_one String
   champion_two String
-  games_played Int       @default(0)
+  games_played Int      @default(0)
   lane         String?
-  Summoner     Summoner? @relation(fields: [summoner_id], references: [id])
-  summoner_id  Int?
-  createdAt    DateTime  @default(now())
-  updatedAt    DateTime  @updatedAt
+  user_id      Int
+  createdAt    DateTime @default(now())
+  updatedAt    DateTime @updatedAt
+  user         User     @relation(fields: [user_id], references: [id])
 }
 model Champion {
   id        Int      @id
@@ -58,10 +58,9 @@
 model Token {
   id        Int      @id @default(autoincrement())
   token     String
-  user_id   String   @unique
+  user_id   Int      @unique
   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt
-  user      User?    @relation(fields: [userId], references: [id])
-  userId    Int?
+  user      User     @relation(fields: [user_id], references: [id])
 }
```


