# Migration `20200818105145-add_notes_table`

This migration has been generated by Donny Roufs at 8/18/2020, 12:51:45 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Note" (
"id" SERIAL,
"tags" text   ,
"content" text  NOT NULL ,
"matchup_id" integer  NOT NULL ,
"user_id" integer  NOT NULL ,
"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,
"updatedAt" timestamp(3)  NOT NULL ,
PRIMARY KEY ("id"))

ALTER TABLE "public"."Note" ADD FOREIGN KEY ("matchup_id")REFERENCES "public"."Matchup"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."Note" ADD FOREIGN KEY ("user_id")REFERENCES "public"."User"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200818103143-add_games_lost_to_matchup..20200818105145-add_notes_table
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -17,8 +17,9 @@
   password    String
   permissions Int       @default(1)
   summoner    Summoner?
   matchups    Matchup[]
+  Note        Note[]
   token       Token?
   createdAt   DateTime  @default(now())
   updatedAt   DateTime  @updatedAt
 }
@@ -45,16 +46,29 @@
   opponent_id  Int
   lane         String
   championA    Champion @relation("matchup_champion_id", fields: [champion_id], references: [id])
   championB    Champion @relation("matchup_opponent_id", fields: [opponent_id], references: [id])
+  Note         Note[]
   user         User     @relation(fields: [user_id], references: [id])
   user_id      Int
   createdAt    DateTime @default(now())
   updatedAt    DateTime @updatedAt
   @@id([champion_id, opponent_id, lane, user_id])
 }
+model Note {
+  id         Int      @id @default(autoincrement())
+  tags       String?
+  content    String
+  matchup_id Int
+  matchup    Matchup  @relation(fields: [matchup_id], references: [id])
+  user_id    Int
+  user       User     @relation(fields: [user_id], references: [id])
+  createdAt  DateTime @default(now())
+  updatedAt  DateTime @updatedAt
+}
+
 model Champion {
   id                  Int       @id
   name                String    @unique
   image               String
```


