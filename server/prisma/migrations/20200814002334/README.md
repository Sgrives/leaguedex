# Migration `20200814002334`

This migration has been generated by Donny Roufs at 8/14/2020, 2:23:34 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
DROP INDEX "public"."Token_user_id"

ALTER TABLE "public"."Token" DROP CONSTRAINT "Token_user_id_fkey"

ALTER TABLE "public"."Token" DROP COLUMN "user_id";

ALTER TABLE "public"."User" ADD COLUMN "token_id" integer   ;

CREATE UNIQUE INDEX "User_token_id" ON "public"."User"("token_id")

ALTER TABLE "public"."User" ADD FOREIGN KEY ("token_id")REFERENCES "public"."Token"("id") ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200814001522..20200814002334
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -19,9 +19,10 @@
   permissions Int       @default(1)
   Matchups    Matchup[]
   createdAt   DateTime  @default(now())
   updatedAt   DateTime  @updatedAt
-  Token       Token
+  token       Token?    @relation(fields: [token_id], references: [id])
+  token_id    Int?
 }
 model Summoner {
   id        Int      @id @default(autoincrement())
@@ -58,9 +59,8 @@
 model Token {
   id        Int      @id @default(autoincrement())
   token     String
-  user_id   Int
   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt
-  user      User     @relation(fields: [user_id], references: [id])
+  User      User
 }
```


