# Migration `20200802181618-init`

This migration has been generated by Donny Roufs at 8/2/2020, 6:16:18 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."User" (
"id" SERIAL,
"email" text  NOT NULL ,
"username" text  NOT NULL ,
"password" text  NOT NULL ,
PRIMARY KEY ("id"))

CREATE TABLE "public"."Note" (
"id" SERIAL,
"body" text  NOT NULL ,
"user_id" integer   ,
"matchupId" integer   ,
PRIMARY KEY ("id"))

CREATE TABLE "public"."Summoner" (
"id" integer  NOT NULL ,
"name" text  NOT NULL ,
"level" integer  NOT NULL ,
"user_id" integer  NOT NULL ,
PRIMARY KEY ("id"))

CREATE TABLE "public"."Matchup" (
"id" SERIAL,
"champion_one" text  NOT NULL ,
"champion_two" text  NOT NULL ,
"games_played" integer  NOT NULL DEFAULT 0,
"lane" text   ,
"summoner_id" integer   ,
PRIMARY KEY ("id"))

CREATE TABLE "public"."Champion" (
"id" integer  NOT NULL ,
"name" text  NOT NULL ,
"image" text  NOT NULL ,
"lore" text  NOT NULL ,
"tags" text  NOT NULL ,
"version" text  NOT NULL ,
PRIMARY KEY ("id"))

CREATE UNIQUE INDEX "User.email" ON "public"."User"("email")

CREATE UNIQUE INDEX "Summoner_user_id" ON "public"."Summoner"("user_id")

ALTER TABLE "public"."Note" ADD FOREIGN KEY ("user_id")REFERENCES "public"."User"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "public"."Note" ADD FOREIGN KEY ("matchupId")REFERENCES "public"."Matchup"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "public"."Summoner" ADD FOREIGN KEY ("user_id")REFERENCES "public"."User"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."Matchup" ADD FOREIGN KEY ("summoner_id")REFERENCES "public"."Summoner"("id") ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200802181618-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,58 @@
+// This is your Prisma schema file,
+// learn more about it in the docs: https://pris.ly/d/prisma-schema
+
+datasource db {
+  provider = "postgresql"
+  url = "***"
+}
+
+generator client {
+  provider = "prisma-client-js"
+}
+
+model User {
+  id       Int       @id @default(autoincrement())
+  email    String    @unique
+  username String
+  password String
+  notes    Note[]
+  summoner Summoner?
+}
+
+model Note {
+  id        Int      @id @default(autoincrement())
+  body      String
+  User      User?    @relation(fields: [user_id], references: [id])
+  user_id   Int?
+  Matchup   Matchup? @relation(fields: [matchupId], references: [id])
+  matchupId Int?
+}
+
+model Summoner {
+  id       Int       @id
+  name     String
+  level    Int
+  Matchups Matchup[]
+  user     User      @relation(fields: [user_id], references: [id])
+  user_id  Int
+}
+
+model Matchup {
+  id           Int       @id @default(autoincrement())
+  champion_one String
+  champion_two String
+  games_played Int       @default(0)
+  lane         String?
+  notes        Note[]
+  Summoner     Summoner? @relation(fields: [summoner_id], references: [id])
+  summoner_id  Int?
+}
+
+model Champion {
+  id      Int    @id
+  name    String
+  image   String
+  lore    String
+  tags    String
+  version String
+}
```


