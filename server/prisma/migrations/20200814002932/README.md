# Migration `20200814002932`

This migration has been generated by Donny Roufs at 8/14/2020, 2:29:32 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
DROP INDEX "public"."User_token_id"

ALTER TABLE "public"."User" DROP CONSTRAINT "User_token_id_fkey"

ALTER TABLE "public"."Token" ADD COLUMN "user_id" integer  NOT NULL ;

ALTER TABLE "public"."User" DROP COLUMN "token_id";

CREATE UNIQUE INDEX "Token_user_id" ON "public"."Token"("user_id")

ALTER TABLE "public"."Token" ADD FOREIGN KEY ("user_id")REFERENCES "public"."User"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200814002334..20200814002932
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -19,10 +19,9 @@
   permissions Int       @default(1)
   Matchups    Matchup[]
   createdAt   DateTime  @default(now())
   updatedAt   DateTime  @updatedAt
-  token       Token?    @relation(fields: [token_id], references: [id])
-  token_id    Int?
+  token       Token?
 }
 model Summoner {
   id        Int      @id @default(autoincrement())
@@ -61,6 +60,7 @@
   id        Int      @id @default(autoincrement())
   token     String
   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt
-  User      User
+  user_id   Int
+  user      User     @relation(fields: [user_id], references: [id])
 }
```


